<!doctype html>
</section>
</main>


<!-- Product details modal -->
<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-lg">
<div class="modal-content">
<div class="modal-header">
<h5 id="productModalLabel" class="modal-title">Detalles</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
</div>
<div class="modal-body">
<div class="row">
<div class="col-md-5 d-flex align-items-center justify-content-center">
<img id="modalImage" src="" alt="Imagen del producto" style="max-height:260px;object-fit:contain;" />
</div>
<div class="col-md-7">
<h3 id="modalTitle" class="h6"></h3>
<p id="modalDesc" class="text-muted"></p>
<p class="fw-bold">$ <span id="modalPrice"></span></p>
</div>
</div>
</div>
<div class="modal-footer">
<button type="button" id="modalAddBtn" class="btn btn-primary">Agregar al carrito</button>
<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
</div>
</div>
</div>
</div>


<!-- Offcanvas Cart -->
<div class="offcanvas offcanvas-end offcanvas-cart" tabindex="-1" id="cartOffcanvas" aria-labelledby="cartOffcanvasLabel">
<div class="offcanvas-header">
<h5 id="cartOffcanvasLabel">Tu carrito</h5>
<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
</div>
<div class="offcanvas-body d-flex flex-column">
<div id="cartList" class="mb-3" role="list">
<!-- products in cart -->
</div>


<div class="mt-auto">
<div class="d-flex justify-content-between align-items-center mb-2">
<strong>Total:</strong>
<strong>$ <span id="cartTotal">0.00</span></strong>
</div>
<div class="d-flex gap-2">
<button id="clearCartBtn" class="btn btn-outline-danger w-100">Vaciar carrito</button>
<button id="checkoutBtn" class="btn btn-success w-100">Finalizar compra</button>
</div>
</div>
</div>
</div>


<footer role="contentinfo" class="text-center py-4 mt-4 bg-white">
<div class="container">Hecho con ❤️ — Demo responsivo y accesible</div>
</footer>


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


<script>
// Accesibility and semantic: ARIA labels added where needed
const API = 'https://fakestoreapi.com/products';
const productsRow = document.getElementById('productsRow');
const searchInput = document.getElementById('search');
const cartCountEl = document.getElementById('cartCount');
const cartListEl = document.getElementById('cartList');
const cartTotalEl = document.getElementById('cartTotal');


// Modal elements
const productModal = new bootstrap.Modal(document.getElementById('productModal'));
const modalTitle = document.getElementById('modalTitle');
const modalDesc = document.getElementById('modalDesc');
const modalPrice = document.getElementById('modalPrice');
const modalImage = document.getElementById('modalImage');
const modalAddBtn = document.getElementById('modalAddBtn');


// Offcanvas
const cartOffcanvasEl = document.getElementById('cartOffcanvas');
const cartOffcanvas = new bootstrap.Offcanvas(cartOffcanvasEl);


let allProducts = [];
let currentProduct = null;


// LocalStorage helpers
const CART_KEY = 'mi_tienda_cart_v1';
function readCart(){
try{
return JSON.parse(localStorage.getItem(CART_KEY)) || [];
}catch(e){return []}
}
function writeCart(cart){
localStorage.setItem(CART_KEY, JSON.stringify(cart));
renderCart();
}


// Fetch products
async function loadProducts(){
try{
const res = await fetch(API);
